<UserControl x:Class="CallstackAnnotator.ResultsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- top bar -->
            <RowDefinition Height="Auto"/>   <!-- template editor -->
            <RowDefinition Height="*"/>      <!-- tabs -->
        </Grid.RowDefinitions>

        <!-- Top bar -->
        <WrapPanel Grid.Row="0" Margin="8">
            <TextBlock Text="Mode:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <ComboBox x:Name="ModeCombo" Width="140" Margin="0,0,12,0"
                      SelectionChanged="ModeCombo_SelectionChanged"/>

            <Button x:Name="PasteButton" Content="Paste" Margin="0,0,8,0"
                    Click="PasteButton_Click"/>
            <Button x:Name="CopyPromptButton" Content="Copy Prompt" Margin="0,0,16,0"
                    Click="CopyPromptButton_Click"/>

            <TextBlock Text="Frames to Annotate:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox x:Name="FramesTextBox" Width="70" Margin="0,0,12,0"
                     PreviewTextInput="NumericOnly"
                     DataObject.Pasting="NumericPaste"
                     TextChanged="FramesTextBox_TextChanged"/>

            <TextBlock Text="Max Function Lines:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox x:Name="MaxLinesTextBox" Width="70"
                     PreviewTextInput="NumericOnly"
                     DataObject.Pasting="NumericPaste"
                     TextChanged="MaxLinesTextBox_TextChanged"/>
        </WrapPanel>

        <!-- Inline template editor -->
        <Grid Grid.Row="1" Margin="8">
            <Grid.RowDefinitions>
                <RowDefinition Height="420"/>
            </Grid.RowDefinitions>

            <WrapPanel Grid.Row="0">
                <TextBlock Text="Prompt template (persists per Mode):" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <Button x:Name="SaveTemplateButton" Content="Save Template" Click="SaveTemplateButton_Click"/>
            </WrapPanel>

            <TextBox x:Name="TemplateTextBox" Grid.Row="1"
                     FontFamily="Consolas" FontSize="12"
                     AcceptsReturn="True" AcceptsTab="True"
                     TextWrapping="NoWrap"
                     HorizontalScrollBarVisibility="Auto"
                     VerticalScrollBarVisibility="Auto"
                     TextChanged="TemplateTextBox_TextChanged"/>
        </Grid>

        <!-- Tabs -->
        <TabControl Grid.Row="2" Margin="0,0,0,0">
            <!-- Prompt tab -->
            <TabItem Header="Prompt">
                <Grid>
                    <TextBox x:Name="PromptTextBox"
                             FontFamily="Consolas" FontSize="12"
                             IsReadOnly="True"
                             AcceptsReturn="True" AcceptsTab="True"
                             TextWrapping="NoWrap"
                             HorizontalScrollBarVisibility="Auto"
                             VerticalScrollBarVisibility="Auto"/>
                </Grid>
            </TabItem>

            <!-- Callstack tab -->
            <TabItem Header="Callstack">
                <TextBox x:Name="CallstackTextBox"
                         FontFamily="Consolas" FontSize="12"
                         IsReadOnly="True"
                         AcceptsReturn="True"
                         TextWrapping="NoWrap"
                         HorizontalScrollBarVisibility="Auto"
                         VerticalScrollBarVisibility="Auto"/>
            </TabItem>

            <!-- Sources tab -->
            <TabItem Header="Sources">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="380"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ListBox x:Name="FramesListBox" Grid.Column="0"
                             SelectionChanged="FramesListBox_SelectionChanged"/>

                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock x:Name="FrameStatusTextBlock" Margin="8" TextWrapping="Wrap"/>
                        <TextBox x:Name="SourceTextBox" Grid.Row="1"
                                 FontFamily="Consolas" FontSize="12"
                                 IsReadOnly="True"
                                 AcceptsReturn="True"
                                 TextWrapping="NoWrap"
                                 HorizontalScrollBarVisibility="Auto"
                                 VerticalScrollBarVisibility="Auto"/>
                    </Grid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>

